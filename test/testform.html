<html>

<head>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/postscribe/2.0.8/postscribe.min.js"></script>
    <style>
        div.lol {
            margin: 12px auto;
        }
    </style>

    <script>
        const urlParams = window.location.search;
        const utmCampaignValue = new URLSearchParams(urlParams).get('utm_campaign');
        const utmSourceValue = new URLSearchParams(urlParams).get('utm_source');
        const utmMediumValue = new URLSearchParams(urlParams).get('utm_medium');
        const utmTermValue = new URLSearchParams(urlParams).get('utm_term');
        const utmContentValue = new URLSearchParams(urlParams).get('utm_content');
        if (utmCampaignValue) { localStorage.setItem('utm_campaign', utmCampaignValue) } else { localStorage.setItem('utm_campaign', '') };
        if (utmSourceValue) { localStorage.setItem('utm_source', utmSourceValue) } else { localStorage.setItem('utm_source', '') };
        if (utmMediumValue) { localStorage.setItem('utm_medium', utmMediumValue) } else { localStorage.setItem('utm_medium', '') };
        if (utmTermValue) { localStorage.setItem('utm_term', utmTermValue) } else { localStorage.setItem('utm_term', '') };
        if (utmContentValue) { localStorage.setItem('utm_content', utmContentValue) } else { localStorage.setItem('utm_content', '') };
    </script>

    <script type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async></script>
    <link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet">
    <script src="https://assets.calendly.com/assets/external/widget.js" type="text/javascript" async></script>

</head>

<body>
    <div>
        <form>
            <label for="utmCampaign"> UTM Campaign </label>
            <input type="text" id="utmCampaign">
            <div class="lol"></div>
            <label for="utmSource"> UTM Source </label>
            <input type="text" id="utmSource">
            <div class="lol"></div>
            <label for="utmMedium"> UTM Medium </label>
            <input type="text" id="utmMedium">
            <div class="lol"></div>
            <label for="utmTerm"> UTM Term </label>
            <input type="text" id="utmTerm">
            <div class="lol"></div>
            <label for="utmContent"> UTM Content </label>
            <input type="text" id="utmContent">
        </form>
    </div>
    <div>
        <div style="height:600px;" id="_calendlyPost"></div>
    </div>

    <!-- Calendly link widget begin -->

    <!-- <div>
        <link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet">
        <script src="https://assets.calendly.com/assets/external/widget.js" type="text/javascript" async></script>
        <a href=""
            onclick="Calendly.initPopupWidget({url: 'https://calendly.com/d/dnj-3gn-yn9'});return false;">Schedule time
            with us</a>
    </div> -->
    <!-- Calendly link widget end -->


    <!--Pull UTM values from Local Storage and put them into the corresponding fields within the form -->>
    <script>
        document.getElementById("utmCampaign").value = localStorage.getItem('utm_campaign');
        document.getElementById("utmSource").value = localStorage.getItem('utm_source');
        document.getElementById("utmMedium").value = localStorage.getItem('utm_medium');
        document.getElementById("utmTerm").value = localStorage.getItem('utm_term');
        document.getElementById("utmContent").value = localStorage.getItem('utm_content'); 
    </script>

    <div>

        <script defer type="text/javascript">
            $(function () {
                const calendlyUtmCampaignValue = localStorage.getItem('utm_campaign');
                const calendlyUtmSourceValue = localStorage.getItem('utm_source');
                const calendlyUtmMediumValue = localStorage.getItem('utm_medium');
                const calendlyUtmTermValue = localStorage.getItem('utm_term');
                const calendlyUtmContentValue = localStorage.getItem('utm_content');
                const url_query = `?utm_campaign=${calendlyUtmCampaignValue}&utm_source=${calendlyUtmSourceValue}&utm_medium=${calendlyUtmMediumValue}&utm_term=${calendlyUtmTermValue}&utm_content=${calendlyUtmContentValue}&hide_event_type_details=1&hide_gdpr_banner=1`;
                const url = `https://calendly.com/d/dnj-3gn-yn9`;
                const url_complete = `'` + url + url_query + `'`;
                postscribe('#_calendlyPost', `<div class="calendly-inline-widget" data-url=${url_complete} style="min-height:600px;"></div>`);
            })
        </script>
    </div>
</body>

</html>